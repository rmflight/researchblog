{
  "hash": "e2ec549169032c3ad4854002366e042f",
  "result": {
    "markdown": "---\ntitle: \"My Vacation in Barometric Pressure\"\nsubtitle: |\n  What can we see from my phone's barometric pressure readings?\ndate: 09-20-2021\ncategories: [graphing, maps, visualization]\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n## The What?\n\nI recently took a proper vacation, that involved driving from Lexington, KY, USA to Digby, NS, Canada and all points in between.\nI also have an app, [Barometer Reborn](https://play.google.com/store/apps/details?id=net.hubalek.android.apps.barometer&hl=en_US&gl=US), on my phone that measures the air pressure every 15 minutes or so.\nThis data is useful for someone who suffers from pressure induced migraines.\nI decided it would be interesting to examine the air pressure readings over the course of my vacation, given that we crossed an extremely wide variety of terrain (and weather) in our travels.\n\nSo lets see what kinds of things we can see.\nA big caveat with this data is that we are essentially recording local pressure, a combination of pressure changes from both elevation and weather changes, as I don't have the correction for elevation turned on.\nI think it will still be interesting to examine whats in here.\n\n## Load Data\n\nI've previously uploaded data to Google Drive from my phone and downloaded it.\nAlthough it says \"csv\", it turns out it's actually tab-separated.\nI also do the conversion to a date-time format explicitly here, because it was easier than parsing the date format that the app uses.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggforce)\ntheme_set(cowplot::theme_cowplot())\nbarometer_readings = read.table(here::here(\"data_files/barometer_2021-09-17.csv\"), sep = \"\\t\", header = TRUE) %>%\n  dplyr::mutate(pressure = Pressure..mBar.,\n                datetime = lubridate::as_datetime(Timestamp..Unix.Time. / 1000, tz = \"America/New_York\")) %>%\n  dplyr::filter(datetime >= \"2021-08-21\", datetime <= \"2021-09-15\")\n```\n:::\n\n\n## Initial Plot\n\nWe can plot the whole thing, with the pressure at sea level as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(barometer_readings, aes(x = datetime,\n                               y = pressure)) +\n  geom_line(size = 1.5) +\n  geom_hline(yintercept = 1013.25, color = \"red\", size = 1.5, alpha = 0.5) +\n  labs(x = \"Date\", y = \"Pressure (mBar)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot_them-1.png){width=672}\n:::\n:::\n\n\nThis is kinda cool.\nAt both ends it's easy to see the passage there and back through the mountains (not big ones, but still)!\nIt's also easy to see that outside of those, I spent a lot of time near sea level, which is expected from Bangor, ME on.\n\n## Annotations\n\nLet's annotate it!\nWe can come up with some simple annotations, like the driving sections, and then when we were in a location, and add those to the plot.\nThe (1) and (2) labels are to keep from having weird plot artifacts appearing in the line plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbarometer_readings = barometer_readings %>%\n  dplyr::mutate(location =\n   dplyr::case_when(\n     \n     datetime <= \"2021-08-22 08:00\" ~ \"Lexington - Bangor\",\n     datetime <= \"2021-08-23 08:00\" ~ \"Waiting on Covid Test\",\n     datetime <= \"2021-08-23 19:00\" ~ \"Bangor - Digby\",\n     datetime <= \"2021-08-28 08:00\" ~ \"Digby 1\",\n     datetime <= \"2021-08-28 14:00\" ~ \"Daytrip to Liverpool\",\n     datetime <= \"2021-09-03 10:00\" ~ \"Digby 2\",\n     datetime <= \"2021-09-03 16:30\" ~ \"Digby - Burton\",\n     datetime <= \"2021-09-08 09:00\" ~ \"Burton 1\",\n     datetime <= \"2021-09-08 20:00\" ~ \"Daytrip to Moncton\",\n     datetime <= \"2021-09-13 08:00\" ~ \"Burton 2\",\n     datetime <= \"2021-09-15\" ~ \"Burton - Lexington\"\n   ),\n   day = lubridate::as_date(datetime))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot = ggplot(barometer_readings, aes(x = datetime, y = pressure, color = location)) + \n  geom_line(size = 1.5) +\n  theme(legend.position = c(0.2, 0.3)) +\n  labs(x = \"Date\", y = \"Pressure (mBar)\")\nbig_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot_full-1.png){width=768}\n:::\n\n```{.r .cell-code}\nbig_plot2 = big_plot + theme(legend.position = \"none\")\n```\n:::\n\n\nWe can plot some of these as subsets and zoom in on them.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot2 + \n  facet_zoom(x = location %in% c(\"Lexington - Bangor\", \"Waiting on Covid Test\", \"Bangor - Digby\")) +\n  labs(caption = \"Going from Lexington to Bangor, awaiting test results, and then driving to Digby.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/section1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot2 +\n  facet_zoom(x = location %in% c(\"Digby 1\", \"Daytrip to Liverpool\", \"Digby 2\")) +\n  labs(caption = \"Digby, with a trip across land to Liverpool.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/section2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot2 +\n  facet_zoom(x = location %in% c(\"Digby - Burton\", \"Burton 1\", \"Daytrip to Moncton\", \"Burton 2\")) +\n  labs(caption = \"Traveling from Digby to Burton, a daytrip to Moncton, and remainder in Burton.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/section3-1.png){width=672}\n:::\n:::\n\n\nYou can actually see towards the tail end of our stay in Burton, the big increase in local pressure from a high-front that gave me a massive migraine and kept me home from activities with the family.\nThankfully that was the only one.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot2 +\n  facet_zoom(x = as.character(day) %in% c(\"2021-09-10\", \"2021-09-11\")) +\n  labs(caption = \"Migraine day, stayed home.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/migraine-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_plot2 +\n  facet_zoom(x = location %in% c(\"Burton - Lexington\")) +\n  labs(caption = \"Traveling home to Lexington from Burton over 2 days.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/section4-1.png){width=672}\n:::\n:::\n\n\n## Conclusions\n\nI dunno, honestly.\nThis would probably be more interesting if it was one or the other of changes due to altitude, or due to changes in the weather with an adjustment for the altitude.\nMany of the dips are due to changes occurring because of a change in altitude, with the biggest ones noted as we drove through the Appalachian mountains.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}